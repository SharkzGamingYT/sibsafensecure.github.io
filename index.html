<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>S-I-B Browser</title>

<!-- Google Tag Manager -->
<script>
(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
 new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
 j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;
 j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MWHBDX8F');
</script>
<!-- End Google Tag Manager -->

<style>
  :root{
    --accent:#4285F4;
    --card-bg: rgba(255,255,255,0.08);
    --card-hover: rgba(255,255,255,0.12);
  }
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%;font-family:Segoe UI, system-ui, Arial, sans-serif;color:#fff}
  body{
    /* default: universe */
    background: url('https://images.unsplash.com/photo-1582196504852-44f0cba1f1bc?auto=format&fit=crop&w=1600&q=80') center/cover fixed no-repeat;
    display:flex;flex-direction:column;align-items:center;padding-top:56px;
  }

  /* top bar (settings button / brand) */
  .topbar{position:fixed;left:0;right:0;top:0;height:56px;display:flex;align-items:center;justify-content:flex-end;padding:0 16px;background:linear-gradient(to bottom, rgba(0,0,0,0.28), rgba(0,0,0,0.06));backdrop-filter: blur(4px);z-index:40}
  .brand{position:fixed;left:18px;top:10px;color:#fff;font-weight:600}
  button.icon-btn{background:transparent;border:0;color:#fff;font-size:18px;padding:8px;border-radius:8px;cursor:pointer}
  button.icon-btn:hover{background:rgba(255,255,255,0.06)}

  /* header */
  .header{margin-top:36px;text-align:center;z-index:2}
  .logo{font-size:40px;font-weight:700;letter-spacing:1px;text-shadow:0 2px 10px rgba(0,0,0,0.6)}
  .tagline{margin-top:6px;color:rgba(255,255,255,0.85)}

  /* quick link cards */
  .quick-links{display:flex;gap:18px;margin-top:36px;flex-wrap:wrap;justify-content:center;z-index:2}
  .card{
    width:120px;height:110px;border-radius:12px;background:var(--card-bg);
    display:flex;flex-direction:column;align-items:center;justify-content:center;text-decoration:none;color:#fff;
    box-shadow:0 6px 18px rgba(0,0,0,0.45);transition:transform .16s,background .16s;
    backdrop-filter: blur(6px);
  }
  .card:hover{transform:translateY(-6px);background:var(--card-hover)}

  .card img{width:44px;height:44px;margin-bottom:10px;filter:drop-shadow(0 2px 6px rgba(0,0,0,0.6))}

  /* search */
  .search-wrap{margin-top:36px;width:min(760px,92%);z-index:2}
  .search{
    display:flex;border-radius:28px;overflow:hidden;background:rgba(255,255,255,0.12);
    box-shadow:0 6px 24px rgba(0,0,0,0.5);backdrop-filter: blur(8px);
  }
  .search input{flex:1;padding:14px 18px;border:0;background:transparent;color:#fff;font-size:16px;outline:none}
  .search button{background:var(--accent);border:0;color:#fff;padding:12px 20px;font-weight:600;cursor:pointer}
  .search button:hover{filter:brightness(.95)}

  footer{margin-top:auto;padding:22px;color:rgba(255,255,255,0.8);font-size:13px;z-index:2}

  /* settings modal */
  .modal-back{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:60}
  .modal{width:360px;max-width:92%;background:rgba(20,20,20,0.96);padding:18px;border-radius:12px;box-shadow:0 12px 40px rgba(0,0,0,0.6);color:#fff}
  .modal h3{margin-bottom:12px}
  .row{display:flex;align-items:center;justify-content:space-between;margin:10px 0}
  select,input[type="checkbox"]{padding:8px;border-radius:8px;border:0;background:#111;color:#fff}
  label{font-size:14px;color:#ddd;margin-right:10px}

  /* small responsive */
  @media (max-width:520px){
    .card{width:94px;height:92px}
    .logo{font-size:30px}
    .search input{font-size:15px}
    .modal{width:92%}
  }
</style>
</head>
<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MWHBDX8F"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End GTM noscript -->

  <div class="topbar">
    <div class="brand">S-I-B Browser</div>
    <button id="settingsBtn" class="icon-btn" title="Settings">⚙️</button>
  </div>

  <div class="header">
    <div class="logo">S-I-B Browser</div>
    <div class="tagline">Safe &amp; Secure</div>
  </div>

  <div class="quick-links" id="quickLinks">
    <a class="card" href="https://mail.google.com" target="_blank">
      <img src="https://img.icons8.com/color/48/google-mail.png" alt="Gmail">
      <div>Gmail</div>
    </a>
    <a class="card" href="https://www.google.com/imghp" target="_blank">
      <img src="https://img.icons8.com/color/48/google-images.png" alt="Images">
      <div>Images</div>
    </a>
    <a class="card" href="https://www.youtube.com" target="_blank">
      <img src="https://img.icons8.com/color/48/youtube-play.png" alt="YouTube">
      <div>YouTube</div>
    </a>
    <a class="card" href="https://news.google.com" target="_blank">
      <img src="https://img.icons8.com/color/48/google-news.png" alt="News">
      <div>News</div>
    </a>
  </div>

  <div class="search-wrap">
    <div class="search">
      <input id="q" type="text" placeholder="Search Google..." />
      <button id="searchBtn">Search</button>
    </div>
  </div>

  <footer>&copy; 2025 S-I-B Browser</footer>

  <!-- settings modal -->
  <div id="modalBack" class="modal-back">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
      <h3 id="settingsTitle">Settings</h3>

      <div class="row">
        <label for="themeSelect">Theme</label>
        <select id="themeSelect">
          <option value="universe">Universe</option>
          <option value="light">Light</option>
          <option value="dark">Dark</option>
          <option value="gradient">Gradient</option>
        </select>
      </div>

      <div class="row">
        <label for="newtab">Open search in new tab</label>
        <input id="newtab" type="checkbox" />
      </div>

      <div class="row">
        <label for="analytics">Enable analytics</label>
        <input id="analytics" type="checkbox" />
      </div>

      <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
        <button id="closeModal" style="padding:8px 12px;border-radius:8px;border:0;cursor:pointer">Close</button>
      </div>
    </div>
  </div>

<script>
/* SETTINGS + THEME + ANALYTICS HANDLING */
// quick helpers
const modalBack = document.getElementById('modalBack');
const settingsBtn = document.getElementById('settingsBtn');
const closeModal = document.getElementById('closeModal');
const themeSelect = document.getElementById('themeSelect');
const newtabCheckbox = document.getElementById('newtab');
const analyticsCheckbox = document.getElementById('analytics');

function openModal(){ modalBack.style.display='flex' }
function closeModalFn(){ modalBack.style.display='none' }
settingsBtn.addEventListener('click', openModal);
closeModal.addEventListener('click', closeModalFn);
modalBack.addEventListener('click', e => { if(e.target===modalBack) closeModalFn() })

// load saved settings
const settings = JSON.parse(localStorage.getItem('sib_settings')||'{}');
if(settings.theme) themeSelect.value = settings.theme;
if(settings.newtab) newtabCheckbox.checked = settings.newtab;
if(typeof settings.analytics === 'boolean') analyticsCheckbox.checked = settings.analytics;

// apply theme
function applyTheme(name){
  if(name==='universe'){
    document.body.style.background = "url('https://images.unsplash.com/photo-1582196504852-44f0cba1f1bc?auto=format&fit=crop&w=1600&q=80') center/cover fixed no-repeat";
    document.body.style.color='#fff';
  } else if(name==='light'){
    document.body.style.background = "#f5f6f8";
    document.body.style.color='#111';
  } else if(name==='dark'){
    document.body.style.background = "#0b0b10";
    document.body.style.color = '#fff';
  } else if(name==='gradient'){
    document.body.style.background = "linear-gradient(135deg,#4facfe,#00f2fe)";
    document.body.style.color='#fff';
  }
}
// initialize theme
applyTheme(themeSelect.value);
themeSelect.addEventListener('change', e=>{
  applyTheme(e.target.value);
  saveSettings();
});

// new tab toggle
function saveSettings(){
  const s = { theme: themeSelect.value, newtab: newtabCheckbox.checked, analytics: analyticsCheckbox.checked };
  localStorage.setItem('sib_settings', JSON.stringify(s));
  // notify GTM/analytics of consent change if dataLayer exists
  if(window.dataLayer) window.dataLayer.push({ event: 'sib_settings', settings: s });
}
newtabCheckbox.addEventListener('change', saveSettings);

// analytics toggle
analyticsCheckbox.addEventListener('change', () => {
  saveSettings();
  // push explicit consent event to dataLayer (GTM listens if configured)
  if(window.dataLayer) {
    window.dataLayer.push({ event: 'sib_analytics_consent', enabled: analyticsCheckbox.checked });
  }
  // note: GTM script is included at top; this informs your GTM tags (you should configure consent in GTM)
});

// search behavior
const searchInput = document.getElementById('q');
const searchBtn = document.getElementById('searchBtn');
function doSearch(){
  const q = searchInput.value.trim();
  if(!q) return;
  const url = 'https://www.google.com/search?q=' + encodeURIComponent(q);
  const openInNew = JSON.parse(localStorage.getItem('sib_settings')||'{}').newtab;
  if(openInNew) window.open(url, '_blank');
  else window.location.href = url;
}
searchBtn.addEventListener('click', doSearch);
searchInput.addEventListener('keydown', e => { if(e.key==='Enter') doSearch(); });

// first-time defaults
if(Object.keys(settings).length===0){
  // set sensible defaults
  themeSelect.value='universe';
  newtabCheckbox.checked=false;
  analyticsCheckbox.checked=true;
  saveSettings();
}

</script>
</body>
</html>
